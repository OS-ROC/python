# 装饰器

------

## 什么是装饰器？

装饰器其实也是一种闭包，其功能就是在不破坏目标函数原有的代码和功能的前提下，为目标函数增加新功能。

### 示例场景

python

```
def sleep():
    import random
    import time
    print("睡眠中......")
    time.sleep(random.randint(1, 5))
```



希望给`sleep`函数增加功能：

- 在调用`sleep`前输出：我要睡觉了
- 在调用`sleep`后输出：我起床了

可以使用装饰器来实现。

------

## 装饰器的一般写法（闭包写法）

python

```
def outer(func):
    def inner():
        print("我要睡觉了")
        func()
        print("我起床了")
    return inner

def sleep():
    import random
    import time
    print("睡眠中......")
    time.sleep(random.randint(1, 5))

fn = outer(sleep)
fn()
```



定义一个闭包函数，在闭包函数内部：

- 执行目标函数
- 并完成功能的添加

### 执行结果：

text

```
我要睡觉了
睡眠中......
我起床了
```



------

## 装饰器的语法糖写法

python

```
def outer(func):
    def inner():
        print("我要睡觉了")
        func()
        print("我起床了")
    return inner

@outer
def sleep():
    import random
    import time
    print("睡眠中......")
    time.sleep(random.randint(1, 5))

sleep()
```



使用`@outer`，定义在目标函数`sleep`之上。

### 执行结果：

text

```
我要睡觉了
睡眠中......
我起床了
```



------

## 总结

### 1. 什么是装饰器？

装饰器就是使用创建一个闭包函数，在闭包函数内调用目标函数。
可以达到不改动目标函数的同时，增加额外的功能。

### 2. 装饰器的写法

#### 一般写法：

python

```
def outer(func):
    def inner():
        print("我要睡觉了")
        func()
        print("我起床了")
    return inner
```



#### 语法糖写法：

python

```
@outer
def sleep():
    import random
    import time
    print("睡觉中......")
    time.sleep(random.randint(1, 5))

sleep()
```