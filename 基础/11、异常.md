# Python 异常处理学习笔记

## 学习目标 (Learning Objectives)
1. 了解异常的概念
2. 知道为什么要捕获异常
3. 掌握捕获异常的语法格式

---

## 什么是异常

当检测到一个错误时，Python解释器就无法继续执行了，反而出现了一些错误的提示，这就是所谓的“异常”，也就是我们常说的BUG。

---

## 异常演示

例如：以 `'r'` 方式打开一个不存在的文件。

```python
f = open('linux.txt', 'r')
```
执行结果：

```python
Traceback (most recent call last):
  File "/Users/cndws/PycharmProjects/pythonProject/demo.py", line 1, in <module>
    f = open('linux.txt', 'r')
FileNotFoundError: [Errno 2] No such file or directory: 'linux.txt'
```

## 总结
### 什么是异常：
异常就是程序运行的过程中出现了错误。

### bug是什么意思：
bug就是指异常的意思。因为历史上小虫子导致计算机失灵的案例，所以延续至今，bug就代表软件出现错误。

## 为什么要捕获异常
世界上没有完美的程序，任何程序在运行的过程中，都有可能因为异常（bug）导致无法完美运行下去。

我们要做的不是力求程序完美运行，而是在力所能及的范围内，对可能出现的bug进行提前准备和处理。这种行为称之为：<strong>异常处理（捕获异常）</strong>。

### 为什么需要捕获异常
当程序遇到BUG时，有两种情况：

- 整个程序因为一个BUG停止运行

- 对BUG进行提醒，整个程序继续运行

捕获异常的作用在于：提前假设某处会出现异常，做好提前准备，当真的出现异常时，可以有后续手段。

## 捕获常规异常
基本语法：

```python
try:
    可能发生错误的代码
except:
    如果出现异常执行的代码
```
示例：

```python
try:
    f = open('linux.txt', 'r')
except:
    f = open('linux.txt', 'w')
```
## 捕获指定异常
基本语法：

```python
try:
    print(name)
except NameError as e:
    print('name变量名称未定义错误')
```
注意事项：

- 如果尝试执行的代码的异常类型和要捕获的异常类型不一致，则无法捕获异常。

- 一般try下方只放一行尝试执行的代码。

## 捕获多个异常
可以使用元组的方式捕获多个异常：

```python
try:
    print(1/0)
except (NameError, ZeroDivisionError):
    print('ZeroDivision错误...')
```
执行结果：

```python
ZeroDivision错误...
```
## 异常else
else表示如果没有异常时要执行的代码：

```python
try:
    print(1)
except Exception as e:
    print(e)
else:
    print('我是else，是没有异常的时候执行的代码')
```
执行结果：

```python
1
我是else，是没有异常的时候执行的代码
```
## 异常的finally
finally表示无论是否异常都要执行的代码，例如关闭文件：

```python
try:
    f = open('test.txt', 'r')
except Exception as e:
    f = open('test.txt', 'w')
else:
    print('没有异常，真开心')
finally:
    f.close()
```
## 异常的传递
异常是具有传递性的。当函数func01中发生异常且没有捕获时，异常会传递到调用它的函数func02，若func02也未捕获，则继续传递到main函数。

示例：

```python
def func1():
    print("func1 开始执行")
    num = 1 / 0  # 发生异常
    print("func1 结束执行")

def func2():
    print("func2 开始执行")
    func1()
    print("func2 结束执行")

def main():
    try:
        func2()
    except Exception as e:
        print(f"出现异常了，异常的信息是：{e}")

main()
```
执行结果：

```python
func2 开始执行
func1 开始执行
出现异常了，异常的信息是：division by zero
```
提示：
当所有函数都没有捕获异常的时候，程序就会报错。