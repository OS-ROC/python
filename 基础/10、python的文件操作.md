# 文件操作学习笔记

## 目录
- 文件的编码
- 文件的读取
- 文件的写入
- 文件的追加
- 文件操作综合案例

## 文件的编码

### 什么是编码？
编码是一种规则集合，记录了内容和二进制间进行相互转换的逻辑。计算机只能识别0和1，因此需要编码技术将内容翻译成二进制存入硬盘，或将二进制翻译回可识别内容。

### 常用编码
- UTF-8
- GBK
- Big5
- 等

### 为什么需要编码？
计算机只认识0和1，因此需要编码将内容翻译成0和1才能保存，同时也需要编码将保存的0和1反向翻译回可识别内容。

---

## 文件的基本概念

### 什么是文件？
内存中的数据在关机后会消失，为了长久保存数据，引入了“文件”的概念。文件可以是文章、视频、程序等，操作系统以文件为单位管理磁盘数据。文件可分为文本文件、视频文件、音频文件等。

---

## 文件的操作步骤
1. 打开文件
2. 读写文件
3. 关闭文件

注意事项：可以只打开和关闭文件，不进行任何读写。

---

## 文件的打开

### open()函数
语法：`open(name, mode, encoding)`
- `name`：目标文件名（可包含路径）。
- `mode`：打开模式（如只读、写入、追加）。
- `encoding`：编码格式（推荐UTF-8）。

示例：
```python
f = open('python.txt', 'r', encoding='UTF-8')
```
注意事项：

f是文件对象，拥有属性和方法。

encoding需用关键字参数指定。

### 常用访问模式
r：只读（默认模式）。

w：写入（覆盖原有内容）。

a：追加（在原有内容后添加）。

## 文件的读取
### 读取方法
- read(num)：读取指定长度字节（不指定则读取全部）。

- readline()：读取一行。

- readlines()：读取所有行，返回列表。

- for line in 文件对象：循环读取每一行。

示例：

```python
content = f.readlines()  # 返回列表，每行为一个元素
```
关闭文件
```python
f.close()  # 释放文件占用
```
自动关闭文件
使用with open语法可自动关闭文件：

```python
with open("python.txt", "r") as f:
    content = f.readlines()
```
## 文件的写入
### 写入步骤
- 打开文件（模式为w）。

- 写入内容。

- 刷新缓冲区（或关闭文件）。

示例：

```python
f = open('python.txt', 'w')
f.write('hello world')
f.flush()  # 或 f.close()
```
注意事项：

- w模式会清空原有内容。

- 内容先写入缓冲区，调用flush()或close()时才写入磁盘。

## 文件的追加
### 追加步骤
- 打开文件（模式为a）。

- 写入内容。

- 刷新缓冲区（或关闭文件）。

示例：

```python
f = open('python.txt', 'a')
f.write('hello world\n')  # 使用\n换行
f.flush()
```
注意事项：

- a模式会在文件末尾追加内容。

- 可使用\n写入换行符。

## 文件操作综合案例
### 案例：过滤文件内容并备份
```python
fr = open("bill.txt", "r", encoding="utf-8")  # 读取原文件
fx = open("bill.txt.bak", "w", encoding="utf-8")  # 写入备份文件

for line in fr:
    line = line.strip()  # 去除前后空格和换行符
    if line.split(",")[4] == "测试":  # 判断第5列是否为“测试”
        continue  # 跳过测试行
    fx.write(f"{line}\n")  # 写入非测试行（补回换行符）

fr.close()
fx.close()
```
## 学习目标
- 了解文件操作的作用。

- 掌握文件的打开、读取、关闭操作。

## 总结
- 文件操作通过open函数获取文件对象。

- 读取方法包括read()、readline()、readlines()和循环读取。

- 写入和追加使用write()和flush()（或close()）。

- 操作完成后必须关闭文件（或使用with open自动关闭）。